#!/usr/bin/env node

/**
 * Creates an index.ts file that re-exports all generated API modules
 * This runs after Orval generates the API files
 */

const fs = require('fs');
const path = require('path');

const generatedDir = path.join(__dirname, '..', 'src', 'lib', 'api', 'generated');
const indexPath = path.join(generatedDir, 'index.ts');

const indexContent = `/**
 * Generated by orval üç∫
 * Do not edit manually.
 * This file re-exports all generated API modules and provides convenient aliases.
 */

// Re-export all generated modules
export * from "./models";
export * from "./papers/papers";
export * from "./review/review";
export * from "./tasks/tasks";
export * from "./documents/documents";
export * from "./users/users";
export * from "./history/history";
export * from "./default/default";

// Convenient aliases for commonly used hooks
export {
  useSearchPapersApiV1PapersSearchGet as useSearchPapers,
  getSearchPapersApiV1PapersSearchGetQueryKey as getSearchPapersQueryKey,
  useGetPaperApiV1PapersPaperIdGet as useGetPaper,
  useChatWithPaperApiV1PapersPaperIdChatPost as useChatWithPaper,
  useUploadPdfApiV1PapersUploadPost as useUploadPaper,
} from "./papers/papers";

export {
  useGenerateReviewApiV1ReviewGenerateReviewPost as useGenerateReview,
  useSaveReviewApiV1ReviewSavePost as useSaveReview,
  useGetReviewHistoryApiV1ReviewHistoryGet as useGetReviewHistory,
  getGetReviewHistoryApiV1ReviewHistoryGetQueryKey as getGetReviewHistoryQueryKey,
  useDeleteReviewApiV1ReviewReviewIdDelete as useDeleteReview,
} from "./review/review";

export {
  useGetTaskStatusApiV1TasksTaskIdGet as useGetTaskStatus,
  getGetTaskStatusApiV1TasksTaskIdGetQueryKey as getGetTaskStatusQueryKey,
  useGetUserTasksApiV1TasksGet as useGetUserTasks,
  useCancelTaskApiV1TasksTaskIdCancelPost as useCancelTask,
} from "./tasks/tasks";

export {
  useGenerateDocumentApiV1DocumentsGeneratePost as useGenerateDocument,
} from "./documents/documents";
`;

try {
    fs.writeFileSync(indexPath, indexContent, 'utf8');
    console.log('‚úÖ Created index.ts for generated API modules');
} catch (error) {
    console.error('‚ùå Failed to create index.ts:', error.message);
    process.exit(1);
}

