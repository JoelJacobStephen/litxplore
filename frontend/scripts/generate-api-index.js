const fs = require('fs');
const path = require('path');

const generatedDir = path.join(__dirname, '../src/lib/api/generated');
const indexPath = path.join(generatedDir, 'index.ts');

// List of subdirectories that orval generates
const subdirs = ['default', 'documents', 'history', 'papers', 'review', 'tasks', 'users'];

// Create the index file content
const indexContent = `// Auto-generated index file for orval generated API
// This file re-exports all generated API hooks and types
// Generated by scripts/generate-api-index.js

${subdirs.map(dir => `export * from './${dir}/${dir}';`).join('\n')}
export * from './models';
`;

// Write the index file
try {
  fs.writeFileSync(indexPath, indexContent, 'utf8');
  console.log('✅ Generated API index file at:', indexPath);
} catch (error) {
  console.error('❌ Failed to generate API index file:', error.message);
  process.exit(1);
}
